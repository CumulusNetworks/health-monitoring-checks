# Collects CPU metrics shown in check-cpu.rb as JSON output
# This can be sent to logstash for some little mangling so that it
# can be stored in a datastore like Elasticsearch. See
# github.com/CumulusNetworks/logstash-conf for more details on the logstash config.
# CPU metrics are collected every 10 seconds.
{
  "checks": {
    "cpu_metrics": {
      "type": "metric",
       "command": "/etc/sensu/plugins/metrics/cpu-metrics.rb",
      "interval": 10,
      "subscribers": [
        "switches"
      ],
      "handlers": ["logstash"]
    }
  }
}
